extends ../main-frame

block content

    //-----------------------------------------------
    // Declarations start

    mixin link(href, name)
        //- attributes == {class: "btn"}
        .button-wrapper
            //<a class="btn btn-default" href="#" role="button">Link</a>
            a(class!=attributes.class href=href)= name

    mixin draw-single-event-details(event)


            each picture in event.pictures
                - var src = picture.src;
                - var alt = 'event picture ' + picture.alt;
                img(src=event.pictures[0].src, width=150, height=100, alt=alt)

            .event-with-detail-draw-wrapper-author
                img(src=event.author.profilePicture.src, width=150, alt='profile picture ' + event.author.username)

                - var hrefUser = '/profile/' + event.author.username
                +link(hrefUser, event.author.username)

            .event-with-detail-draw-wrapper-buttons
                - var interestedInCount = event.interestedIn.length + ' people interested in going';
                - var participatingInCount = event.participatingIn.length + ' people paricipating in going';
                    p #{interestedInCount}
                    ='\n'
                    p #{participatingInCount}

                +link('/categories/ski/interested/' + event._id, 'Im interested')(class="btn btn-default" role="button")
                +link('/categories/ski/sure-participate/' + event._id, 'I will sure participate')(class="btn btn-default" role="button")

            .event-with-detail-draw-wrapper-event-draw-body
                h2 #{event.title}
                = '\n'
                = '\n'

                p #{event.body}
                = '\n'

            .event-with-detail-draw-wrapper-footer



    //-Declarations end

    //-----------------------------------------------
    //-Page content start



    .single-event-banner
        = '\n'
        = '\n'
        = '\n'
        img(src="/res/images/all-main.jpg", height=100 alt="extreme-sports-main-all")
        span Hey man, do a can-can ski fahren?!
        = '\n'
        = '\n'


    .event-with-detail-draw-wrapper.clearfix
        +draw-single-event-details(event)
        = '\n'
        = '\n'

    .event-with-detail-comments
        .col-md-4.col-md-offset-4.text-left
            form.form-add-comment(action='/categories/add-comment/' + event._id, method="post")
                h2.form-add-comment-heading Add new comment
                br
                label.sr-only(for='body') text
                input#add-comment-body.form-control(type='text', placeholder='text', name="body" required='', autofocus='true')
                br
                button#add-comment-button.btn.btn-md.btn-success.btn-block(type='submit' onclick="return false") Add comment


